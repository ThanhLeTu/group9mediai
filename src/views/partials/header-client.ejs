<link rel="stylesheet" href="/static/assets/css/vars.css">
<link rel="stylesheet" href="/static/assets/css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<header class="bg-white shadow-md py-4 px-6 flex justify-between items-center">
  <a href="/" class="text-xl font-bold text-blue-600">ğŸ¥ Medi9 Health</a>

  <!-- Äiá»u hÆ°á»›ng: bá»‡nh viá»‡n, chuyÃªn khoa, tiÃªm chá»§ng -->
  <div class="flex items-center space-x-6">
    <a href="/hospitals" class="text-sm text-gray-700 hover:text-blue-600 font-medium flex items-center">
      <i class="fas fa-hospital mr-1"></i> Bá»‡nh viá»‡n
    </a>
    <a href="/specializations" class="text-sm text-gray-700 hover:text-blue-600 font-medium flex items-center">
      <i class="fas fa-stethoscope mr-1"></i> ChuyÃªn khoa
    </a>
    <a href="/vaccinations" class="text-sm text-gray-700 hover:text-blue-600 font-medium flex items-center">
      <i class="fas fa-syringe mr-1"></i> TiÃªm chá»§ng
    </a>

    <!-- TÃ i khoáº£n -->
    <div class="relative" id="accountWrapper">
      <button id="accountBtn" class="flex items-center space-x-2 text-gray-700 hover:text-blue-600 focus:outline-none">
        <i class="fas fa-user-circle text-2xl text-blue-600"></i>
        <span>TÃ i khoáº£n</span>
        <i class="fas fa-chevron-down text-xs"></i>
      </button>

      <!-- Dropdown -->
      <div id="accountDropdown" class="absolute right-0 mt-2 bg-white shadow rounded w-56 hidden z-50">
        <% if (user) { %>
          <div class="p-4 border-b">
            <p class="text-gray-700">Xin chÃ o,</p>
            <p class="font-semibold text-blue-600"><%= user.fullName || user.email || 'NgÆ°á»i dÃ¹ng' %></p>
          </div>
          <ul class="text-sm text-gray-700">
            <li><a href="/profile" class="block px-4 py-2 hover:bg-gray-100">ğŸ“ Há»“ sÆ¡ bá»‡nh nhÃ¢n</a></li>
            <li><a href="/appointments/history" class="block px-4 py-2 hover:bg-gray-100">ğŸ“„ Lá»‹ch sá»­ Ä‘áº·t khÃ¡m</a></li>
            <li><a href="/vaccinations/history" class="block px-4 py-2 hover:bg-gray-100">ğŸ§¾ Lá»‹ch sá»­ tiÃªm chá»§ng</a></li>
            <li><a href="/notifications" class="block px-4 py-2 hover:bg-gray-100">ğŸ”” ThÃ´ng bÃ¡o</a></li>
          </ul>
          <div class="border-t">
            <a href="/logout" class="block px-4 py-2 text-red-500 hover:bg-gray-100">ğŸšª ÄÄƒng xuáº¥t</a>
          </div>
        <% } else { %>
          <div class="p-4">
            <p class="text-sm text-gray-700">Báº¡n chÆ°a Ä‘Äƒng nháº­p.</p>
            <a href="/login" class="block mt-2 px-4 py-2 text-blue-600 hover:bg-gray-100 rounded">ğŸ” ÄÄƒng nháº­p</a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</header>
<script>
  const btn = document.getElementById("accountBtn");
  const dropdown = document.getElementById("accountDropdown");
  const wrapper = document.getElementById("accountWrapper");

  if (btn && dropdown && wrapper) {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.classList.toggle("hidden");
    });

    document.addEventListener("click", (e) => {
      if (!wrapper.contains(e.target)) {
        dropdown.classList.add("hidden");
      }
    });
  }
</script>
